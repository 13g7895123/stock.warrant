# åƒ¹å¤–æ¬Šè­‰æŸ¥è©¢åŠŸèƒ½èªªæ˜

## åŠŸèƒ½æ¦‚è¿°
æ–°å¢äº†åƒ¹å¤–æ¬Šè­‰æŸ¥è©¢åŠŸèƒ½ï¼Œå¯ä»¥ç¯©é¸ä¸¦é¡¯ç¤ºæ‰€æœ‰åƒ¹å…§å¤–ç¨‹åº¦ç‚ºè² å€¼ï¼ˆåƒ¹å¤–ï¼‰çš„æ¬Šè­‰ï¼Œä¸¦ä¸”å¯ä»¥è‡ªè¨‚æŸ¥è©¢çš„é æ•¸ã€‚

## ä½¿ç”¨æ–¹å¼

### LINE Bot æŒ‡ä»¤
```
åƒ¹å¤– è‚¡ç¥¨ä»£è™Ÿ              # æŸ¥è©¢å…¨éƒ¨é é¢çš„åƒ¹å¤–æ¬Šè­‰
åƒ¹å¤– è‚¡ç¥¨ä»£è™Ÿ é æ•¸          # æŸ¥è©¢æŒ‡å®šé æ•¸çš„åƒ¹å¤–æ¬Šè­‰
```

### ç¯„ä¾‹
```
åƒ¹å¤– 6669                 # æŸ¥è©¢ 6669 çš„æ‰€æœ‰åƒ¹å¤–æ¬Šè­‰ï¼ˆå…¨éƒ¨é é¢ï¼‰
åƒ¹å¤– 6669 5               # æŸ¥è©¢ 6669 çš„åƒ¹å¤–æ¬Šè­‰ï¼ˆåªæŸ¥å‰ 5 é ï¼‰
åƒ¹å¤– 2330 3               # æŸ¥è©¢ 2330 çš„åƒ¹å¤–æ¬Šè­‰ï¼ˆåªæŸ¥å‰ 3 é ï¼‰
```

## æŠ€è¡“å¯¦ä½œ

### 1. æ–°å¢é¡åˆ¥ï¼šOutOfMoneyWarrantScraper
**æª”æ¡ˆï¼š** `scraper.py`

- ç¹¼æ‰¿è‡ª `WarrantScraper`
- é‡å¯« `extract_warrant_data()` æ–¹æ³•ï¼ŒåŠ å…¥åƒ¹å¤–ç¯©é¸é‚è¼¯
- æ–°å¢ `is_out_of_money()` æ–¹æ³•åˆ¤æ–·æ¬Šè­‰æ˜¯å¦ç‚ºåƒ¹å¤–
  - åˆ¤æ–·é‚è¼¯ï¼šåªè¦åŒ…å«ã€Œåƒ¹å¤–ã€æ–‡å­—å³ç‚ºåƒ¹å¤–ï¼ˆä¾‹å¦‚ï¼šã€Œåƒ¹å¤– 10.65%ã€ï¼‰
  - ä¸åŒ…å«ã€Œåƒ¹å¤–ã€æ–‡å­—å‰‡ä¸ç®—ï¼ˆä¾‹å¦‚ï¼šã€Œåƒ¹å…§ 5.2%ã€ã€ã€Œå¹³åƒ¹ã€ï¼‰

### 2. æ›´æ–°æŒ‡ä»¤è§£æå™¨
**æª”æ¡ˆï¼š** `linebot/commands.py`

- æ–°å¢åƒ¹å¤–æŸ¥è©¢æŒ‡ä»¤çš„è§£æé‚è¼¯
- æ”¯æ´å…©ç¨®æ ¼å¼ï¼š
  - `åƒ¹å¤– è‚¡ç¥¨ä»£è™Ÿ`ï¼šæŸ¥è©¢å…¨éƒ¨é é¢
  - `åƒ¹å¤– è‚¡ç¥¨ä»£è™Ÿ é æ•¸`ï¼šæŸ¥è©¢æŒ‡å®šé æ•¸
- æ›´æ–°å¹«åŠ©è¨Šæ¯å’ŒéŒ¯èª¤è¨Šæ¯

### 3. æ–°å¢è™•ç†å™¨
**æª”æ¡ˆï¼š** `linebot/handlers.py`

- æ–°å¢ `handle_outofmoney_query()` å‡½æ•¸
- ä½¿ç”¨ `OutOfMoneyWarrantScraper` åŸ·è¡ŒæŸ¥è©¢
- æ›´æ–° `format_warrant_message()` æ”¯æ´åƒ¹å¤–æŸ¥è©¢çµæœçš„æ ¼å¼åŒ–

### 4. æ›´æ–° Bot ä¸»ç¨‹å¼
**æª”æ¡ˆï¼š** `linebot/bot.py`

- å°å…¥ `handle_outofmoney_query` è™•ç†å™¨
- åœ¨ `handle_message()` ä¸­åŠ å…¥ 'outofmoney' æŒ‡ä»¤é¡å‹
- åœ¨ `process_query_and_push()` ä¸­åŠ å…¥åƒ¹å¤–æŸ¥è©¢çš„è™•ç†é‚è¼¯

## åƒ¹å¤–åˆ¤æ–·é‚è¼¯

æ¬Šè­‰çš„åƒ¹å…§å¤–ç¨‹åº¦è¡¨ç¤ºæ¬Šè­‰æ¨™çš„åƒ¹æ ¼èˆ‡å±¥ç´„åƒ¹æ ¼çš„å·®è·ï¼š
- **åƒ¹å…§**ï¼šé¡¯ç¤ºç‚ºã€Œåƒ¹å…§ X%ã€ï¼ˆå°è²·æ–¹æœ‰åˆ©ï¼‰
- **å¹³åƒ¹**ï¼šé¡¯ç¤ºç‚ºã€Œå¹³åƒ¹ã€ï¼ˆå±¥ç´„åƒ¹ç­‰æ–¼ç¾åƒ¹ï¼‰
- **åƒ¹å¤–**ï¼šé¡¯ç¤ºç‚ºã€Œåƒ¹å¤– X%ã€ï¼ˆå°è²·æ–¹ä¸åˆ©ï¼Œä½†æ¬Šåˆ©é‡‘è¼ƒä¾¿å®œï¼‰

æœ¬åŠŸèƒ½ç¯©é¸æ‰€æœ‰åŒ…å«ã€Œåƒ¹å¤–ã€æ–‡å­—çš„æ¬Šè­‰ï¼Œåˆ¤æ–·æ–¹å¼ç°¡å–®ç›´è§€ï¼š
```python
def is_out_of_money(self, moneyness_str: str) -> bool:
    return 'åƒ¹å¤–' in moneyness_str
```

## æŸ¥è©¢çµæœæ ¼å¼

```
ğŸ“‰ åƒ¹å¤–æŸ¥è©¢çµæœ (åƒ¹å¤–ï¼ˆ<0%ï¼‰)
æ‰¾åˆ° 15 ç­†åƒ¹å¤–æ¬Šè­‰ï¼ˆå‰5é ï¼‰
==============================

ğŸ“Š å…ƒå¤§6669è³¼01
ä»£è™Ÿ: 070123 | åƒ¹æ ¼: 0.45
åƒ¹å…§å¤–: -3.2%
å‰©é¤˜å¤©æ•¸: 45
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Š å‡±åŸº6669è³¼02
ä»£è™Ÿ: 070234 | åƒ¹æ ¼: 0.38
åƒ¹å…§å¤–: -5.8%
å‰©é¤˜å¤©æ•¸: 62
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

... (æœ€å¤šé¡¯ç¤º 10 ç­†)

âš ï¸ åƒ…é¡¯ç¤ºå‰ 10 ç­†
ç¸½å…± 15 ç­†è³‡æ–™
```

## æ³¨æ„äº‹é …

1. **æŸ¥è©¢æ™‚é–“**ï¼šé æ•¸è¶Šå¤šï¼ŒæŸ¥è©¢æ™‚é–“è¶Šé•·
2. **åƒ¹å¤–å®šç¾©**ï¼šåƒ¹å…§å¤–ç¨‹åº¦ < 0% å³ç‚ºåƒ¹å¤–
3. **çµæœé¡¯ç¤º**ï¼šè¨Šæ¯æœ€å¤šé¡¯ç¤ºå‰ 10 ç­†ï¼Œé¿å…è¨Šæ¯éé•·
4. **å¤±æ•—é‡è©¦**ï¼šæ¯é æœ€å¤šé‡è©¦ 3 æ¬¡ï¼Œå¤±æ•—çš„é é¢æœƒåœ¨çµæœä¸­æ¨™ç¤º

## å…¶ä»–æŸ¥è©¢æŒ‡ä»¤

- **å¿«æŸ¥**ï¼š`å¿«æŸ¥ 6669` - å…ƒå¤§æ¬Šè­‰ + å‰3é 
- **æŸ¥è©¢**ï¼š`æŸ¥è©¢ 2330` - å…¨éƒ¨æ¬Šè­‰ + å…¨éƒ¨é é¢
- **åƒ¹å¤–**ï¼š`åƒ¹å¤– 6669 5` - åƒ¹å¤–æ¬Šè­‰ + å¯è‡ªè¨‚é æ•¸
- **å¹«åŠ©**ï¼š`å¹«åŠ©` - æŸ¥çœ‹ä½¿ç”¨èªªæ˜
